---
title: "GDA_CaseStudy_Analyze"
author: "Fred"
date: "4/22/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#### Case Study Roadmap - Analyze

Ask Three questions will guide the future marketing program:

    1. How do annual members and casual riders use Cyclistic bikes dierently?
    2. Why would casual riders buy Cyclistic annual memberships? 
    3. How can Cyclistic use digital media to influence casual riders to become members? 
    
You will produce a report with the following deliverables: 

    1. A clear statement of the business task - Completed
    2. A description of all data sources used - Completed
    3. Documentation of any cleaning or manipulation of data - Completed
    4. A summary of your analysis - In progress
    5. Supporting visualizations and key findings
    6. Your top three recommendations based on your analysis

Guiding questions

    - How should you organize your data to perform analysis on it?
    - Has your data been properly formatted?
    - What surprises did you discover in the data?
    - What trends or relationships did you find in the data?
    - How will these insights help answer your business questions?

Key tasks

    1. Aggregate your data so it’s useful and accessible.
    2. Organize and format your data.
    3. Perform calculations
    4. Identify trends and relationships.

Deliverable

    - A summary of your analysis 

##### Start of cleaning and transformation
###### This analysis is for case study 1 from the Google Data Analytics Certificate (Cyclistic).  It’s originally based on the case study "'Sophisticated, Clear, and Polished’: Divvy and Data Visualization" written by Kevin Hartman (found here: https://artscience.blog/home/divvy-dataviz-case-study). We will be using the Divvy dataset for the case study. The purpose of this script is to consolidate downloaded Divvy data into a single dataframe and then conduct simple analysis to help answer the key question: “In what ways do members and casual riders use Divvy bikes differently?”


```{r Install Packages, eval=FALSE, include=FALSE}
# # # # # # # # # # # # # # # # # # # # # # # 
# Install required packages
# tidyverse for data import and wrangling
# ggplot for visualization
# # # # # # # # # # # # # # # # # # # # # # #  

install.packages("tidyverse")
install.packages("here")
install.packages("skimr")
install.packages("janitor")
install.packages("dplyr")
install.packages("tidyr")
install.packages("rmarkdown")
install.packages("ggplot2")
```


```{r load Libraries}
### Load Necessary libraries
library(tidyverse)
library(here)
library(skimr)
library(janitor)
library(dplyr)
library(tidyr)
library(rmarkdown)
library(ggplot2)
```


```{r Load csv files to dataframe}
# Loading multiple .csv files as separate data frames
# path to folder that holds multiple .csv files

folder <- "D:/Portfolio/GDA_Case_Study/Bike Share/data/divvy-tripdata/"   

file_list <- list.files(path = folder, pattern = "*.csv")

# read in each .csv file in file_list and create a data frame with name tripdate_<date>
for (i in 1:length(file_list)){
  assign(paste("tripdata_", substr(file_list[i], 1, 6), sep = ''), 
  read.csv(paste(folder, file_list[i], sep=''))
)}
```


```{r Check Column Names, include=FALSE}
#Check for column names for consistency

colnames(tripdata_202004)
colnames(tripdata_202005)
colnames(tripdata_202006)
colnames(tripdata_202007)
colnames(tripdata_202008)
colnames(tripdata_202009)
colnames(tripdata_202010)
colnames(tripdata_202011)
colnames(tripdata_202012)
colnames(tripdata_202101)
colnames(tripdata_202102)
colnames(tripdata_202103)

```


```{r Check Structure, include=FALSE}
#Check structure for consistency

str(tripdata_202004)
str(tripdata_202005)
str(tripdata_202006)
str(tripdata_202007)
str(tripdata_202008)
str(tripdata_202009)
str(tripdata_202010)
str(tripdata_202011)
str(tripdata_202012)
str(tripdata_202101)
str(tripdata_202102)
str(tripdata_202103)
```

```{r Number of rows, include=FALSE}
#Check Number of rows for consistency

nrow(tripdata_202004)
nrow(tripdata_202005)
nrow(tripdata_202006)
nrow(tripdata_202007)
nrow(tripdata_202008)
nrow(tripdata_202009)
nrow(tripdata_202010)
nrow(tripdata_202011)
nrow(tripdata_202012)
nrow(tripdata_202101)
nrow(tripdata_202102)
nrow(tripdata_202103)
```

```{r Dimension of dataframe, include=FALSE}
#Check Dimension of dataframe for consistency

dim(tripdata_202004)
dim(tripdata_202005)
dim(tripdata_202006)
dim(tripdata_202007)
dim(tripdata_202008)
dim(tripdata_202009)
dim(tripdata_202010)
dim(tripdata_202011)
dim(tripdata_202012)
dim(tripdata_202101)
dim(tripdata_202102)
dim(tripdata_202103)
```

```{r Check Summary of dataframe, include=FALSE}
#Check Summary for consistency, and Null values

summary(tripdata_202004)
summary(tripdata_202005)
summary(tripdata_202006)
summary(tripdata_202007)
summary(tripdata_202008)
summary(tripdata_202009)
summary(tripdata_202010)
summary(tripdata_202011)
summary(tripdata_202012)
summary(tripdata_202101)
summary(tripdata_202102)
summary(tripdata_202103)

```


```{r Check first 6 rows of dataframe, include=FALSE}
#Check first 6 rows of dataframe

head(tripdata_202004)
head(tripdata_202005)
head(tripdata_202006)
head(tripdata_202007)
head(tripdata_202008)
head(tripdata_202009)
head(tripdata_202010)
head(tripdata_202011)
head(tripdata_202012)
head(tripdata_202101)
head(tripdata_202102)
head(tripdata_202103)

```
```{r Merge Files, include=FALSE}
#Merge Files to a single data frame
tripdata_all <- rbind(tripdata_202004, tripdata_202005, tripdata_202006, tripdata_202007, tripdata_202008, tripdata_202009, tripdata_202010, tripdata_202011, tripdata_202012, tripdata_202101, tripdata_202102, tripdata_202103)

```


```{r Inspect combined data, include=FALSE}
# Inspect the new table that has been created
colnames(tripdata_all)  #List of column names
nrow(tripdata_all)  #How many rows are in data frame?
dim(tripdata_all)  #Dimensions of the data frame?
head(tripdata_all)  #See the first 6 rows of data frame.  Also tail(qs_raw)
str(tripdata_all)  #See list of columns and data types (numeric, character, etc)
summary(tripdata_all)  #Statistical summary of data. Mainly for numerics

```














